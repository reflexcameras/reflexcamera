 <!-- jQuery Version 1.11.0 -->
   <script src="{{ "/js/jquery.js" | prepend: site.baseurl }}"></script>

   <!-- Bootstrap Core JavaScript -->
   <script src="{{ "/js/bootstrap.min.js" | prepend: site.baseurl }}"></script>

   <!-- Plugin JavaScript -->
   <script src="{{ "/js/jquery.easing.min.js" | prepend: site.baseurl }}"></script>

   <!-- Google Maps API Key - Use your own API key to enable the map feature. More information on the Google Maps API can be found at https://developers.google.com/maps/ 
   <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCRngKslUGJTlibkQ3FkfTxj3Xss1UlZDA&sensor=false"></script> -->

    <!-- Custom Theme JavaScript -->
   <script src="{{ "/js/grayscale.js" | prepend: site.baseurl }}"></script>

   <!-- Gallery JavaScript -->
   <script src="{{ "/js/gallery.js" | prepend: site.baseurl }}"></script>

   <!-- ReCaptcha JavaScript -->
   <script src="{{ "/js/recaptcha.js" | prepend: site.baseurl }}"></script>

   <!-- Cookie Consent script -->

<!-- 1. Banner initialisation (keep this in _includes/js.html) -->
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js"></script>
<script>
   /* helper – minimal, no jQuery */
   function addScript (src, attrs = {}) {
      const s = document.createElement('script');
      s.src = src;
      for (const [k,v] of Object.entries(attrs)) s.setAttribute(k, v);
      document.head.appendChild(s);
   }

   window.addEventListener('load', function () {

      /* ▼   SAVE the returned instance  ▼ */
      window.cc = window.cookieconsent.initialise({
         type:      'opt-in',
         revokable: true,              // leave true if you still want the gear icon
         palette:   {popup:{background:'#222'},button:{background:'#f1d600',text:'#222'}},
         content:   {
            message: 'We use cookies to improve your visit.',
            dismiss: 'Accept all',
            deny:    'Reject',
            link:    'Learn more',
            href:    '{{ "/privacy/" | relative_url }}'
         },
         onInitialise: toggleOptionalTools,
         onStatusChange: toggleOptionalTools
      });

      function toggleOptionalTools () {
         /* GA → optional */
         if (this.hasConsented() && !window.gaLoaded) {
            window.gaLoaded = true;
            addScript('https://www.googletagmanager.com/gtag/js?id=G-K5380EE6TQ', {async: ''});
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-K5380EE6TQ');
         }
      }

      // Add event listener to the "cookie-settings" link to reopen the banner
      const cookieSettingsLink = document.getElementById('cookie-settings');
      if (cookieSettingsLink) {
         cookieSettingsLink.addEventListener('click', function(event) {
            event.preventDefault();
            // Show the cookie consent banner again
            cc.show();
         });
      }
   });
</script>
